Библиотека компании
================================

Тестовое задание находится в файле [yii-test2.doc](yii-test2.doc)
Оценка результата в файле [test-result.txt](test-result.txt)

Ответы на вопросы:

-1- DDL для базы я сохранил в файл db_dump.sql
Для ускорения выборки для отчета в таблице книг сделал поле "кол-во авторов"

-3- Для вывода списка авторов, чьи книги в данный момент читает более трех читателей, можно сделать дополнительную таблицу связей авторов и читателей, это позволит написать более быстрый запрос на выборку, но замедлит добавление авторов и читателей к книгам.
Для вывод пяти случайных книг я использовал один из быстрейших запросов для таблиц с "дырами" в последовательности ID, но он требует кеширования, так как он медленный.
Если надо получать случайные книги в реальном времени (без кеширования), то можно добавить индексируемое поле с последовательностью чисел без "дыр" (обновлять его при удалении записи) и написать запрос с его ипользованием. Это ускорит выборку, но замедлит добавление и удаление записей.

-5- Можно использовать FULLTEXT индекс в MySQL. Но лучше использовать Sphinx сервер, в нем есть возможность распределенного хранения индексов.
Для получения срезов данных, к примеру количество запросов на поиск определенной книги за некоторый период, можно сохранять все запросы в БД в такую таблицу: ID, Query, date с индексами на все поля. Потом по ней можно делать поиск. Если данных будет очень много, а периоды большие, можно добавить поле "количество запросов" и периодически объединять несколько записей с одинаковыми запросами и близким временем в одну.

-6- Можно с помощью PHP сохранять идентифиракоты посетителей в таблицу БД ("идентификатор" unique index,"количество","данные о пользователе").
Идентификатором скорее всего будет IP адрес. При каждом посещении делать запрос типа:

`UPDATE visitors SET count = count+1 WHERE id='192.168.1.2'`

если affected rows будет равен 0 то:

`INSERT INTO visitors (id) VALUES('192.168.1.2')`

REQUIREMENTS
------------

The minimum requirement that your Web server supports PHP 5.4.0.

INSTALLATION
------------

Клонировать репозиторий,

установить зависимости через Composer,

создать БД, импортировать `db_dump.sql`,

ввести настроки БД в `config/db.php`.
